(this["webpackJsonpgoit-react-hw-04-movies"]=this["webpackJsonpgoit-react-hw-04-movies"]||[]).push([[3],{53:function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},54:function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return o}))},55:function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=r(t);if(e){var c=r(this).constructor;n=Reflect.construct(o,arguments,c)}else n=o.apply(this,arguments);return a(this,n)}}n.d(e,"a",(function(){return c}))},56:function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return o}))},57:function(t,e,n){"use strict";n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return f}));var r="bee2b3b8d9976a2be3aae8b77feecf89",o="https://api.themoviedb.org/3";function a(t){return fetch(t).then((function(t){return t.json()})).then((function(t){return t}))}function c(t){return a("".concat(o,"/trending/movie/day?api_key=").concat(r,"&language=en-US&page=").concat(t))}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="".concat(o,"/search/movie?api_key=").concat(r,"&query=").concat(t,"&page=").concat(e);return a(n)}function u(t){return a("".concat(o,"/movie/").concat(t,"?api_key=").concat(r))}function s(t){return a("".concat(o,"/movie/").concat(t,"/credits?api_key=").concat(r,"&language=en-US"))}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="".concat(o,"/movie/").concat(t,"/reviews?api_key=").concat(r,"&language=en-US&page=").concat(e);return a(n)}},58:function(t,e,n){t.exports={movieList:"HomePage_movieList__362IO",movieItem:"HomePage_movieItem__JJtEQ"}},59:function(t,e,n){"use strict";n(0);var r=n(60),o=n.n(r),a=n(1);e.a=function(t){var e=t.getNewPage;return Object(a.jsx)("button",{className:o.a.Button,type:"button","data-action":"load-more",onClick:e,children:"UP"})}},60:function(t,e,n){t.exports={Button:"Button_Button__vph8c"}},61:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function o(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return o}))},63:function(t,e,n){t.exports={Searchbar:"Searchbar_Searchbar__2zK4g",SearchForm:"Searchbar_SearchForm__3M6z-",button:"Searchbar_button__2Be7L",button_label:"Searchbar_button_label__1qfH9",input:"Searchbar_input__2tXPr"}},70:function(t,e,n){"use strict";n.r(e);var r=n(61),o=n(14),a=n(53),c=n(54),i=n(56),u=n(55),s=n(0),f=n(10),l=n(57),p=n(58),h=n.n(p),b=(n(22),n(17)),y=n.n(b),m=n(63),v=n.n(m),d=n(1),g=function(t){Object(i.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))).state={query:""},t.handleChange=function(e){t.setState({query:e.currentTarget.value})},t.handleSubmit=function(e){e.preventDefault();var n=t.state.query;t.props.onSubmit({query:n}),t.setState({query:""})},t}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state.query;return Object(d.jsx)("div",{className:v.a.Searchbar,children:Object(d.jsxs)("form",{className:v.a.SearchForm,onSubmit:this.handleSubmit,children:[Object(d.jsx)("input",{className:v.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movie name",onChange:this.handleChange,name:"query",value:t}),Object(d.jsx)("button",{type:"submit",className:v.a.button,children:Object(d.jsx)("span",{className:v.a.button_label,children:"Search"})})]})})}}]),n}(s.Component),j=n(59),S=function(t){Object(i.a)(n,t);var e=Object(u.a)(n);function n(){var t;Object(a.a)(this,n);for(var c=arguments.length,i=new Array(c),u=0;u<c;u++)i[u]=arguments[u];return(t=e.call.apply(e,[this].concat(i))).state={movies:[],page:1,query:"",error:!1,fetchLength:0,isLoading:!1},t.getQueryByForm=function(e){var n=e.query;n&&t.setState({query:n,page:1}),t.props.history.push(Object(o.a)(Object(o.a)({},t.props.location),{},{search:"query=".concat(n)}))},t.getMoviesByQuery=function(){var e=t.state,n=e.query,o=e.page;t.setState({isLoading:!0}),Object(l.c)(n,o).then((function(e){var n=e.results;t.setState((function(t){return{movies:[].concat(Object(r.a)(t.movies),Object(r.a)(n)),fetchLength:n.length}}))})).catch((function(e){t.setState({error:!0})})).finally((function(){t.setState({isLoading:!1}),window.scrollTo({top:document.documentElement,behavior:"smooth"})}))},t.setNewPage=function(e){e.preventDefault(),t.setState((function(t){return{page:t.page+1}}))},t}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.location.search.slice(7);t&&this.setState({query:t,page:1})}},{key:"componentDidUpdate",value:function(t,e){var n=this.state,r=n.query,o=n.page;(r!==e.query&&""!==r||r===e.query&&o!==e.page)&&this.getMoviesByQuery(r)}},{key:"render",value:function(){var t=this,e=this.state,n=e.movies,r=e.isLoading,o=e.fetchLength,a=this.props.location;return Object(d.jsxs)("div",{children:[Object(d.jsx)(g,{onSubmit:this.getQueryByForm}),r&&Object(d.jsx)(y.a,{type:"ThreeDots",color:"#3f51b5",height:100,width:100,timeout:3e3}),Object(d.jsx)("ul",{className:h.a.movieList,children:n&&n.map((function(e){return Object(d.jsx)("li",{className:h.a.movieItem,children:Object(d.jsx)(f.b,{to:{pathname:"".concat(t.props.match.url,"/").concat(e.id),state:{from:a}},children:Object(d.jsx)("img",{src:"https://image.tmdb.org/t/p/w300".concat(e.poster_path),alt:""})})},e.id)}))}),20===o&&!r&&Object(d.jsx)(j.a,{getNewPage:this.setNewPage})]})}}]),n}(s.Component);e.default=S}}]);
//# sourceMappingURL=3.8c649ec2.chunk.js.map